if(!Array.prototype.forEach){Array.prototype.forEach=function(e){for(var t=0;t<this.length;t++){e.call(this[t],this[t],t)}}}if(!Array.prototype.indexOf){Array.prototype.indexOf=function(e){for(var t=0;t<this.length;t++){if(this[t]===e){return t}}return-1}}(function(e){function i(){n=e(window).scrollTop()>t?1:-1;t=e(window).scrollTop();e.viewPort.elements.forEach(function(t){e.viewPort.guideLines.forEach(function(e){e.check(t)})})}function s(t,i){this.name=t;this.position=i;this.check=function(t){t.lastEvent||(t.lastEvent={});var i=e(t).offset().top,s=i+t.getBoundingClientRect().height,o=i+(s-i)/2,u=parseInt(document.documentElement.clientHeight*this.position),a=e(window).scrollTop()+u,f=t.lastEvent[this.name],l=false;if(a<i||a>s){if(f&&r.indexOf(f.name)>=0){l="leave"}else if(a<i&&f&&f.direction===1||a>s&&(!f||f.direction===-1)){l="skip"}}else{if(n===1){if(!f||r.indexOf(f.name)<0){l="reach"}else if(a>=o&&f&&f.name==="reach"&&f.direction===1){l="lock"}}else{if(!f||r.indexOf(f.name)<0){l="reach"}else if(a<=o&&f&&f.name==="reach"&&f.direction===-1){l="lock"}}}if(l){t.lastEvent[this.name]={name:l,direction:n};this.offset=u;this.y=a;var c={guideLine:this,top:i,middle:o,bottom:s,scrollDirection:n};e(t).trigger(this.name+":"+l,c)}}}function o(e,t){return new CustomEvent(e,{detail:t,bubbles:true,cancelable:true})}function u(t){for(var n=0;n<this.elements.length;n++){if(e(this.elements[n]).is(t)){return n}}return-1}function a(e){if(this.findElement(e)!==-1){return false}this.elements.push(e)}function f(e){var t=this.findElement(e);if(t>-1){this.elements.splice(t,1);return true}return false}var t=0,n=1,r=["reach","lock"];e.viewPort={elements:[],guideLines:[new s("top",0),new s("horizon",.5),new s("bottom",1)],findElement:u,addElement:a,removeElement:f};e.fn.viewPort=function(t){for(var n in t){if(!t.hasOwnProperty(n)){continue}var r=t[n];e(this).each(function(){e(this).on(n,t[n]);e.viewPort.addElement(this)})}return this};e(window).scroll(i);e.viewPort.check=i;e(function(){window.setTimeout(i,100)});return e.viewPort})(jQuery)