(function(e){function i(t,i){this.name=t;this.position=i;this.check=function(t){t.lastEvent||(t.lastEvent={});var i=e(t).offset().top,o=i+t.getBoundingClientRect().height,u=i+(o-i)/2,a=parseInt(document.documentElement.clientHeight*this.position),f=window.scrollY+a,l=t.lastEvent[this.name],c=false;if(f<i||f>o){if(l&&r.indexOf(l.name)>=0){c="leave"}else if(f<i&&l&&l.direction===1||f>o&&(!l||l.direction===-1)){c="skip"}}else{if(n===1){if(!l||r.indexOf(l.name)<0){c="reach"}else if(f>=u&&l&&l.name==="reach"&&l.direction===1){c="lock"}}else{if(!l||r.indexOf(l.name)<0){c="reach"}else if(f<=u&&l&&l.name==="reach"&&l.direction===-1){c="lock"}}}if(c){t.lastEvent[this.name]={name:c,direction:n};this.offset=a;this.y=f;e(t).trigger(s(this.name+":"+c,{top:i,middle:u,bottom:o,scrollDirection:n}),this)}}}function s(e,t){return new CustomEvent(e,{detail:t,bubbles:true,cancelable:true})}function o(e){for(var t=0;t<this.elements.length;t++){if(this.elements[t].isSameNode(e)){return t}}return-1}function u(e){if(this.findElement(e)!==-1){return false}this.elements.push(e)}function a(e){var t=this.findElement(e);if(t>-1){this.elements.splice(t,1);return true}return false}var t=0,n=1,r=["reach","lock"];e.viewPort={elements:[],guideLines:[new i("top",0),new i("horizon",.5),new i("bottom",1)],findElement:o,addElement:u,removeElement:a};e.fn.viewPort=function(t){for(var n in t){if(!t.hasOwnProperty(n)){continue}e(this).each(function(){e(this).on(n,t[n]);e.viewPort.addElement(this)})}return this};e(document).scroll(function(r){n=window.scrollY>t?1:-1;t=window.scrollY;e.viewPort.elements.forEach(function(t){e.viewPort.guideLines.forEach(function(e){e.check(t)})})});return e.viewPort})(jQuery)